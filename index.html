<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crochet Inventory</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  min-height:100vh;
  padding:30px;
}

h1{
  text-align:center;
  color:white;
  margin-bottom:30px;
  font-size:32px;
}

.card{
  background:rgba(255,255,255,0.25);
  backdrop-filter:blur(15px);
  padding:20px;
  margin:20px auto;
  border-radius:20px;
  max-width:1100px;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
  transition:0.3s;
}

.card:hover{
  transform:translateY(-5px);
}

input,select{
  padding:10px;
  margin:8px;
  border-radius:10px;
  border:none;
  outline:none;
  width:180px;
}

input:focus,select:focus{
  box-shadow:0 0 8px #ff1493;
}

button{
  padding:10px 18px;
  border-radius:10px;
  border:none;
  background:linear-gradient(45deg,#ff1493,#ff69b4);
  color:white;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  transform:scale(1.05);
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.delete-btn{
  background:linear-gradient(45deg,#ff0000,#ff4d4d);
}

.material-btn{
  background:linear-gradient(45deg,#6a5acd,#836fff);
}

.logout-btn{
  background:linear-gradient(45deg,#333,#555);
  float:right;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
  background:rgba(255,255,255,0.9);
  border-radius:15px;
  overflow:hidden;
}

th{
  background:linear-gradient(45deg,#ff1493,#ff69b4);
  color:white;
  padding:12px;
}

td{
  padding:10px;
  border-bottom:1px solid #eee;
}

tr:hover{
  background:#ffe6f2;
}

.card p{
  font-size:18px;
  margin:8px 0;
  font-weight:500;
}

/* Responsive */
@media(max-width:768px){
  body{padding:15px;}
  input,select,button{width:100%;margin:8px 0;}
  table{display:block;overflow-x:auto;white-space:nowrap;}
}
</style>
</head>

<body>

<script>
if(localStorage.getItem("isLoggedIn") !== "true"){
  window.location.href="login.html";
}
</script>

<h1>ðŸ§¶ Crochet Business Dashboard 
<button class="logout-btn" onclick="logout()">Logout</button>
</h1>

<!-- Add Order -->
<div class="card">
<h3>Add Order</h3>
<input type="text" id="customer" placeholder="Customer Name">
<input type="text" id="product" placeholder="Product Name">
<input type="number" id="quantity" placeholder="Quantity">
<input type="number" id="price" placeholder="Selling Price (Per Item)">
<input type="date" id="date">
<select id="status">
<option value="Pending">Pending</option>
<option value="Completed">Completed</option>
</select>
<button onclick="addOrder()">Save Order</button>
</div>

<!-- Pending -->
<div class="card">
<h3>ðŸŸ¡ Pending Orders</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Customer</th>
<th>Product</th>
<th>Qty</th>
<th>Total</th>
<th>Action</th>
</tr>
</thead>
<tbody id="pendingTable"></tbody>
</table>
</div>

<!-- Completed -->
<div class="card">
<h3>ðŸŸ¢ Completed Orders</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Customer</th>
<th>Product</th>
<th>Qty</th>
<th>Total</th>
<th>Profit</th>
<th>Action</th>
</tr>
</thead>
<tbody id="completedTable"></tbody>
</table>
</div>

<!-- Summary -->
<div class="card">
<h3>Business Summary</h3>
<p>Total Orders: <span id="totalOrders">0</span></p>
<p>Pending Orders: <span id="pendingOrders">0</span></p>
<p>Completed Orders: <span id="completedOrders">0</span></p>
<p>Total Sales: â‚¹<span id="totalSales">0</span></p>
<p><strong>Total Profit: â‚¹<span id="totalProfit">0</span></strong></p>
</div>

<!-- Material Page -->
<div class="card" style="text-align:center;">
<h3>Material Management</h3>
<a href="material.html">
<button class="material-btn">ðŸ“¦ Go To Material Page</button>
</a>
</div>

<script>
let orders = JSON.parse(localStorage.getItem("orders")) || [];
let editIndex = -1;

function saveData(){
  localStorage.setItem("orders",JSON.stringify(orders));
}

function addOrder(){
  let customer=document.getElementById("customer").value;
  let product=document.getElementById("product").value;
  let quantity=parseInt(document.getElementById("quantity").value);
  let price=parseFloat(document.getElementById("price").value);
  let date=document.getElementById("date").value;
  let status=document.getElementById("status").value;

  if(!customer || !product || !quantity || !price || !date){
    alert("Fill all fields");
    return;
  }

  let totalPrice=price*quantity;

  if(editIndex===-1){
    orders.push({customer,product,quantity,price,totalPrice,date,status});
  } else {
    orders[editIndex]={customer,product,quantity,price,totalPrice,date,status};
    editIndex=-1;
  }

  saveData();
  clearInputs();
  updateDashboard();
}

function editOrder(index){
  let order=orders[index];
  document.getElementById("customer").value=order.customer;
  document.getElementById("product").value=order.product;
  document.getElementById("quantity").value=order.quantity;
  document.getElementById("price").value=order.price;
  document.getElementById("date").value=order.date;
  document.getElementById("status").value=order.status;
  editIndex=index;
}

function markCompleted(index){
  orders[index].status="Completed";
  saveData();
  updateDashboard();
}

function deleteOrder(index){
  if(confirm("Delete order?")){
    orders.splice(index,1);
    saveData();
    updateDashboard();
  }
}

function clearInputs(){
  document.getElementById("customer").value="";
  document.getElementById("product").value="";
  document.getElementById("quantity").value="";
  document.getElementById("price").value="";
  document.getElementById("date").value="";
  document.getElementById("status").value="Pending";
}

function logout(){
  localStorage.removeItem("isLoggedIn");
  window.location.href="login.html";
}

function updateDashboard(){
  let pendingTable=document.getElementById("pendingTable");
  let completedTable=document.getElementById("completedTable");

  pendingTable.innerHTML="";
  completedTable.innerHTML="";

  let pending=0,completed=0,totalSales=0;

  orders.forEach((order,index)=>{
    if(order.status==="Pending"){
      pending++;
      pendingTable.innerHTML+=`
      <tr>
        <td>${order.date}</td>
        <td>${order.customer}</td>
        <td>${order.product}</td>
        <td>${order.quantity}</td>
        <td>â‚¹${order.totalPrice}</td>
        <td>
          <button onclick="editOrder(${index})">Edit</button>
          <button onclick="markCompleted(${index})">Complete</button>
          <button class="delete-btn" onclick="deleteOrder(${index})">Delete</button>
        </td>
      </tr>`;
    }

    if(order.status==="Completed"){
      completed++;
      totalSales+=order.totalPrice;
      completedTable.innerHTML+=`
      <tr>
        <td>${order.date}</td>
        <td>${order.customer}</td>
        <td>${order.product}</td>
        <td>${order.quantity}</td>
        <td>â‚¹${order.totalPrice}</td>
        <td>â‚¹${order.totalPrice}</td>
        <td><button class="delete-btn" onclick="deleteOrder(${index})">Delete</button></td>
      </tr>`;
    }
  });

  document.getElementById("totalOrders").innerText=orders.length;
  document.getElementById("pendingOrders").innerText=pending;
  document.getElementById("completedOrders").innerText=completed;
  document.getElementById("totalSales").innerText=totalSales;
  document.getElementById("totalProfit").innerText=totalSales;
}

updateDashboard();
</script>

<!-- ðŸ”¥ Firebase Connection -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAhLl0L2mU-gH_cjPEH2LECb7IDnId1bk",
  authDomain: "crochet-management.firebaseapp.com",
  projectId: "crochet-management",
  storageBucket: "crochet-management.firebasestorage.app",
  messagingSenderId: "820080156149",
  appId: "1:820080156149:web:2816afacd6f8d70b8f54bc",
  measurementId: "G-GETVJPH7GV"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

console.log("ðŸ”¥ Firebase Connected Successfully");

</script>


</body>
</html>
